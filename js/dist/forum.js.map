{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/direct-links/./src/forum/components/ComposerPage.js","webpack://@fof/direct-links/./src/forum/components/ForgotPage.js","webpack://@fof/direct-links/./src/forum/components/LoginPage.js","webpack://@fof/direct-links/./src/forum/components/RedirectToHomeAndOpenModalPage.js","webpack://@fof/direct-links/./src/forum/components/SignupPage.js","webpack://@fof/direct-links/./src/forum/extend.ts","webpack://@fof/direct-links/./src/forum/index.ts","webpack://@fof/direct-links/external root \"flarum.core.compat['common/components/Page']\"","webpack://@fof/direct-links/external root \"flarum.core.compat['common/extenders']\"","webpack://@fof/direct-links/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/direct-links/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@fof/direct-links/external root \"flarum.core.compat['forum/components/ForgotPasswordModal']\"","webpack://@fof/direct-links/external root \"flarum.core.compat['forum/components/LogInModal']\"","webpack://@fof/direct-links/external root \"flarum.core.compat['forum/components/Page']\"","webpack://@fof/direct-links/external root \"flarum.core.compat['forum/components/SignUpModal']\"","webpack://@fof/direct-links/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/direct-links/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/direct-links/webpack/bootstrap","webpack://@fof/direct-links/webpack/runtime/compat get default export","webpack://@fof/direct-links/webpack/runtime/define property getters","webpack://@fof/direct-links/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/direct-links/webpack/runtime/make namespace object"],"sourcesContent":["import app from 'flarum/forum/app';\nimport Page from 'flarum/forum/components/Page';\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\nimport LogInModal from 'flarum/forum/components/LogInModal';\n\nexport default class ComposerPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    if (!app.session.user) {\n      setTimeout(() => app.modal.show(LogInModal), 500);\n      return m.route.set('/');\n    }\n\n    const params = m.route.param();\n\n    m.route.set('/all');\n\n    setTimeout(() => {\n      let composerProps = {\n        user: app.session.user,\n      };\n\n      if (params.content) {\n        composerProps.originalContent = params.content;\n      }\n\n      app.composer.load(DiscussionComposer, composerProps);\n\n      app.composer.show();\n\n      if (params.title) {\n        app.composer.fields.title(params.title);\n      }\n\n      if (params.primary_tag) {\n        const tag = app.store.getBy('tags', 'slug', params.primary_tag);\n\n        if (tag) {\n          const parent = tag.parent();\n\n          app.composer.fields.tags = parent ? [parent, tag] : [tag];\n        }\n      }\n    }, 0);\n  }\n\n  view() {\n    return m('div');\n  }\n}\n","import app from 'flarum/forum/app';\nimport RedirectToHomeAndOpenModalPage from './RedirectToHomeAndOpenModalPage';\nimport ForgotPasswordModal from 'flarum/forum/components/ForgotPasswordModal';\n\nexport default class ForgotPage extends RedirectToHomeAndOpenModalPage {\n  createModal() {\n    if (!app.session.user) {\n      return ForgotPasswordModal;\n    }\n  }\n}\n","import app from 'flarum/forum/app';\nimport RedirectToHomeAndOpenModalPage from './RedirectToHomeAndOpenModalPage';\nimport LogInModal from 'flarum/forum/components/LogInModal';\n\nexport default class LoginPage extends RedirectToHomeAndOpenModalPage {\n  createModal() {\n    if (!app.session.user) {\n      return LogInModal;\n    }\n  }\n}\n","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\n\nexport default class RedirectToHomeAndOpenModalPage extends Page {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    m.route.set('/');\n\n    setTimeout(() => app.modal.show(this.createModal()), 1500);\n  }\n\n  createModal() {\n    return null;\n  }\n\n  view() {\n    return <div />;\n  }\n}\n","import app from 'flarum/forum/app';\nimport RedirectToHomeAndOpenModalPage from './RedirectToHomeAndOpenModalPage';\nimport SignUpModal from 'flarum/forum/components/SignUpModal';\n\nexport default class SignupPage extends RedirectToHomeAndOpenModalPage {\n  createModal() {\n    if (!app.session.user) {\n      return SignUpModal;\n    }\n  }\n}\n","import Extend from 'flarum/common/extenders';\nimport LoginPage from './components/LoginPage';\nimport SignupPage from './components/SignupPage';\nimport ForgotPage from './components/ForgotPage';\nimport ComposerPage from './components/ComposerPage';\n\nexport default [\n  new Extend.Routes() //\n    .add('directLinksLogin', '/login', LoginPage)\n    .add('directLinksSignup', '/signup', SignupPage)\n    .add('directLinksForgot', '/forgot', ForgotPage)\n    .add('directLinksComposer', '/composer', ComposerPage),\n];\n","import app from 'flarum/forum/app';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('fof/direct-links', () => {\n  // Nothing required here\n});\n","module.exports = flarum.core.compat['common/components/Page'];","module.exports = flarum.core.compat['common/extenders'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/DiscussionComposer'];","module.exports = flarum.core.compat['forum/components/ForgotPasswordModal'];","module.exports = flarum.core.compat['forum/components/LogInModal'];","module.exports = flarum.core.compat['forum/components/Page'];","module.exports = flarum.core.compat['forum/components/SignUpModal'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["app","Page","DiscussionComposer","LogInModal","ComposerPage","_Page","_inheritsLoose","apply","arguments","_proto","prototype","oninit","vnode","call","session","user","setTimeout","modal","show","m","route","set","params","param","composerProps","content","originalContent","composer","load","title","fields","primary_tag","tag","store","getBy","parent","tags","view","default","RedirectToHomeAndOpenModalPage","ForgotPasswordModal","ForgotPage","_RedirectToHomeAndOpe","createModal","LoginPage","_this","SignUpModal","SignupPage","Extend","Routes","add","extend","initializers","setPrototypeOf","subClass","superClass","Object","create","constructor","_setPrototypeOf","o","p","bind","__proto__"],"sourceRoot":""}